# Standalone TiDB Cluster
This is the containerized standalone TiDB cluster generated by TiUP.

## Requirements

- Docker

## Quick Start Usage

TiDB cluster starts with 1 PD instance, 1 TiDB instance, 1 TiKV instance, and 1 TiFlash instance.

### 1. Build

```bash
docker image build -t standalone-tidb-cluster:latest .
```

### 2. Run

```bash
docker container run --rm -d \
    -p 4000:4000 \
    -p 2379:2379 \
    -p 9090:9090 \
    -p 3000:3000 \
    --name standalone-tidb-cluster standalone-tidb-cluster:latest
```

### 3. Connect to TiDB

- Use the TiUP client in the running container

    ```bash
    docker container exec -it standalone-tidb-cluster tiup client
    ```

- Use your MySQL client

    ```bash
    mysql --host 127.0.0.1 --port 4000 -u root
    ```

### 4. Access Dashboards of TiDB

- Access the [TiDB Dashboard](https://docs.pingcap.com/tidb/dev/dashboard-intro)

    URL: http://127.0.0.1:2379/dashboard

    username: root

    password: (empty)

- Access the Prometheus dashboard of TiDB

    URL: http://127.0.0.1:9090

- Access the Grafana dashboard of TiDB

    URL: http://127.0.0.1:3000

    username: admin

    password: admin

### 5. Shutdown

```bash
docker container stop standalone-tidb-cluster
```

## [Optional] Customized TiDB Cluster

The following commands customize the number of PD, TiDB, TiKV, and TiFlash instances when building the Docker image of TiDB cluster.

### Customized Build Example

```bash
# TiDB cluster with
# 3 PD instance,
# 2 TiDB instance,
# 3 TiKV instance,
# and 2 TiFlash instance.
docker image build \
    --build-arg pd=3 \
    --build-arg tidb=2 \
    --build-arg tikv=3 \
    --build-arg tiflash=2 \
    -t standalone-tidb-cluster:latest .
```

## See Also

[Quick Start Guide for the TiDB Database Platform](https://docs.pingcap.com/tidb/dev/quick-start-with-tidb)
